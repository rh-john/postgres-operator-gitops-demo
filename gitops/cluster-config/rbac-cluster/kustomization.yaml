apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # User Groups (must be created first)
  - dba-users-group-definition.yaml
  
  # ClusterRoles
  - postgres-user-role.yaml
  
  # Cluster-wide RBAC
  - master-dba.yaml
  - secops.yaml
  - dba-ui-access.yaml  # UI port-forward access for master DBA
  
  # GitOps RBAC (openshift-gitops namespace)
  - gitops-master-dba.yaml
  - gitops-dba-dev.yaml
  - gitops-dba-test.yaml
  - gitops-dba-prod.yaml
  
  # Operator SCC (OpenShift security)
  - operator-scc-rolebinding.yaml
  
  # Note: DBA Users Group (cross-namespace read) moved to apps/databases/base/
  # This is namespace-scoped RBAC, deployed with each database environment

# Add common labels
commonLabels:
  app.kubernetes.io/name: rbac-cluster
  app.kubernetes.io/managed-by: gitops

# Add common annotations
commonAnnotations:
  managed-by: openshift-gitops
  description: "All RBAC for PostgreSQL Operator - cluster-wide and namespace-level"
